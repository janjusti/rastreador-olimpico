(()=>{class e{constructor(e,t){this.hasCustomCountry=t,this.phaseName=e.phaseName,this.eventUnitName=e.eventUnitName,this.disciplineName=e.disciplineName,this.startDate=e.startDate,this.startText=e.startText,this.status=e.statusDescription,this.medalFlag=e.medalFlag,this.competitors=e.competitors,this.url=`https://olympics.com${e.extraData.detailUrl}`,this.id=e.id}}var t=new URLSearchParams(window.location.search),n="BRA";const s=(new Date).toISOString().split("T")[0];let a;var i,c;function l(){i={},a=[],document.getElementById("filters").classList.remove("filter-active"),document.getElementById("filters").innerHTML="",document.getElementById("content").innerHTML="Loading...",d()}function r(){l(),c=setInterval(d,5e3)}function o(e){document.getElementById("content").innerHTML=e,c=clearInterval(c)}async function d(){try{const t=(n=document.getElementById("datePicker")?.value,l=new Date(n),d=new Date("2024-07-24"),u=new Date("2024-08-11"),h=new Date("2024-08-28"),m=new Date("2024-09-08"),n||(n=s),l>=d&&l<=u?e="summer":l>=h&&l<=m&&(e="summer-para"),e?`https://sph-s-api.olympics.com/${e}/schedules/api/ENG/schedule/day/${n}`:null);if(null===t)return void o("Nothing here today...");let f=await fetch(t,{cache:"no-cache"});if(200!==f.status)return void o(`Error ${f.status} :(`);void 0===c&&r();const v=p(i);i=await f.json(),v&&!p(i)&&function(){const e=document.getElementById("filters"),t=[...new Set(i.units.map((e=>e.disciplineName)))].sort(),n=document.createElement("input");n.type="checkbox",n.id="all-checkbox",n.addEventListener("change",(function(){e.querySelectorAll("input[type='checkbox']:not(#all-checkbox)").forEach((e=>{e.checked=n.checked;const t=new Event("change");e.dispatchEvent(t)}))}));const s=document.createElement("label");s.textContent="All",s.appendChild(n),e.appendChild(s),t.forEach((t=>{const s=document.createElement("input");s.type="checkbox",s.value=t,s.addEventListener("change",(function(){s.checked?a.push(s.value):a=a.filter((e=>e!==s.value)),0!==a.length?e.classList.add("filter-active"):e.classList.remove("filter-active"),E(),s.checked||(n.checked=!1)}));const i=document.createElement("label");i.textContent=t,i.appendChild(s),e.appendChild(i)}))}(),E()}catch(e){console.error("Error fetching data:",e)}var e,n,l,d,u,h,m;"true"===t.get("onetime")&&"Loading..."!=document.getElementById("content").innerText&&(c=clearInterval(c))}function u(e){return e.liveFlag&&["interrupted"].every((t=>t!==e.status.toLowerCase()))}function h(e){return!e.liveFlag&&["finished","cancelled"].every((t=>t!==e.status.toLowerCase()))}function m(e){return"finished"===e.status.toLowerCase()}function p(e){for(const t in e)if(Object.hasOwn(e,t))return!1;return!0}function f(e,t){return"Getting Ready"===e.status?-1:"Getting Ready"===t.status?1:0!==e.medalFlag&&!0===e.hasCustomCountry?-1:0!==t.medalFlag&&!0===t.hasCustomCountry?1:!0===e.hasCustomCountry?-1:!0===t.hasCustomCountry?1:0!==e.medalFlag?-1:0!==t.medalFlag?1:0}function v(e,t){return"Scheduled"!==e.status&&"Scheduled"===t.status?1:"Scheduled"===e.status&&"Scheduled"!==t.status?-1:"Rescheduled"!==e.status&&"Rescheduled"===t.status?1:"Rescheduled"===e.status&&"Rescheduled"!==t.status?-1:0}function g(e,t){const n=e.results?.position?parseInt(e.results?.position,10):null,s=t.results?.position?parseInt(t.results?.position,10):null;return null!==n&&null!==s?n-s:null!==n?-1:null!==s?1:e.order-t.order}function E(){var t,s=(t={live:[],pending:[],finished:[]},i.units.forEach((s=>{if(0===a.length){const a=s.competitors?.some((e=>e.noc===n));u(s)&&t.live.push(new e(s,a)),(0!=s.medalFlag||a)&&(h(s)?t.pending.push(new e(s,a)):m(s)&&t.finished.push(new e(s,a)))}else a.includes(s.disciplineName)&&(u(s)?t.live.push(new e(s,!1)):h(s)?t.pending.push(new e(s,!1)):m(s)&&t.finished.push(new e(s,!1)))})),t);const c=document.getElementById("content");c.innerHTML="",["pending","live","finished"].forEach((e=>{let t=s[e];if(0===t.length)return;const a=document.createElement("div");a.className=`${e}-container`;const i=document.createElement("h1");i.innerText=e.charAt(0).toUpperCase()+e.slice(1),a.appendChild(i),"live"!==e&&"finished"!==e||(t=t.slice().reverse()),"pending"===e&&(t=t.sort(v)),"live"===e&&(t=t.sort(f)),t.forEach((e=>{const t=document.createElement("div");t.className="event";const s=new Date(e.startDate).toLocaleTimeString("en-US",{hour12:!1});let i=function(e){const t=new Date,n=new Date(e);let s=n-t,a=s>=0;a||(s=t-n);const i=Math.floor(s/36e5),c=Math.floor(s%36e5/6e4),l=Math.floor(s%6e4/1e3),r=`${String(i).padStart(2,"0")}:${String(c).padStart(2,"0")}:${String(l).padStart(2,"0")}`;return a?`-${r}`:`${r}`}(e.startDate),c="",l=new Set;var r=e.competitors;void 0===r&&(r=[]),(r=r.sort(g)).slice(0,4).forEach((e=>{let t=e.noc===n?" filteredNOC":"";const s=e.order+1;if(c+=`<div class="competitors${t}">${s}: ${e.name} (${e.noc})`,e.results){let t="";for(const[n,s]of Object.entries(e.results))s&&(t+=`${n}: ${s}<br>`);t&&(c+=`<br><div class="results">${t}</div>`)}c+="</div>",l.add(e.name)})),r.forEach((e=>{if(e.noc===n&&!l.has(e.name)){if(c+=`<div class="competitors filteredNOC">${e.order+1}: ${e.name} (${e.noc})`,e.results){let t="";for(const[n,s]of Object.entries(e.results))s&&(t+=`${n}: ${s}<br>`);t&&(c+=`<br><div class="results">${t}</div>`)}c+="</div>",l.add(e.name)}}));const o=document.createElement("div");o.className="eventTitle",o.innerHTML=`<span>${e.disciplineName} - ${e.eventUnitName}</span>`,0!=e.medalFlag&&o.classList.add("medal"),1===e.medalFlag&&o.classList.add("gold"),3===e.medalFlag&&o.classList.add("bronze"),"Getting Ready"===e.status&&o.classList.add("gettingReady"),o.setAttribute("onclick",`window.open('${e.url}', '_blank').focus();`);const d=document.createElement("div");d.className="eventStatus",i.startsWith("-")&&d.classList.add("futureEvent"),d.innerHTML=`${s} (${i})<br>`,d.innerHTML+=`${e.status}${""===e.startText?"":" ("+e.startText+")"}`,t.innerHTML="",t.appendChild(o),t.appendChild(d),t.innerHTML+=c,a.appendChild(t)})),c.appendChild(a)})),delete s}document.addEventListener("DOMContentLoaded",(e=>{let t=document.getElementById("datePicker");t.value=s,t.onchange=l})),r()})();